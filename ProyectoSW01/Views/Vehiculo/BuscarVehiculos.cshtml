@model IEnumerable<ProyectoSW01.Models.Vehiculo>

@{
    ViewData["Title"] = "Buscar Vehículos";
}

<!-- TAILWIND (borra si ya está en _Layout) -->
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

<div class="min-h-screen bg-slate-950 py-10 px-5">
    <div class="max-w-5xl mx-auto bg-slate-900/70 border border-slate-800 rounded-2xl p-8 shadow-lg">

        <!-- Título -->
        <h2 class="text-3xl font-semibold text-slate-50 mb-6 flex items-center gap-2">
            <span class="material-icons text-emerald-400 text-4xl">directions_car</span>
            Buscar Vehículos
        </h2>

        <p class="text-slate-400 text-sm mb-4">
            Puedes buscar vehículos por <span class="text-emerald-300 font-semibold">número de placa</span>
            o por <span class="text-emerald-300 font-semibold">nombre/apellido del cliente</span>.
        </p>

        <!-- Formulario de búsqueda -->
        <form asp-action="BuscarVehiculos" method="post" class="mb-6">
            @Html.AntiForgeryToken()
            <div class="flex gap-3">
                <input type="text"
                       name="texto"
                       placeholder="Ejemplo: ABC-123 o Juan, Pérez..."
                       value="@ViewBag.TextoBuscado"
                       class="w-full px-4 py-2 rounded-xl bg-slate-800 border border-slate-700 text-slate-200 focus:ring-2 focus:ring-emerald-500 focus:outline-none" />

                <button type="submit"
                        class="flex items-center gap-2 px-4 py-2 bg-emerald-500 hover:bg-emerald-400 text-white rounded-xl transition">
                    <span class="material-icons">search</span>
                    Buscar
                </button>
            </div>
        </form>

        <!-- Error si no se ingresó texto -->
        @if (ViewBag.Error != null)
        {
            <p class="text-red-400 mb-4">@ViewBag.Error</p>
        }

        <!-- Resultados -->
        @if (Model != null && Model.Any())
        {
            <div class="mt-4">
                <h3 class="text-xl font-semibold text-slate-50 mb-3">
                    Resultados para: <span class="text-emerald-300">@ViewBag.TextoBuscado</span>
                </h3>

                <div class="overflow-x-auto">
                    <table class="w-full text-left border-collapse">
                        <thead>
                            <tr class="border-b border-slate-700 text-slate-400 text-sm">
                                <th class="py-2 pr-2">ID</th>
                                <th class="py-2 pr-2">Placa</th>
                                <th class="py-2 pr-2">Marca</th>
                                <th class="py-2 pr-2">Modelo</th>
                                <th class="py-2 pr-2">Año</th>
                                <th class="py-2 pr-2">ClienteId</th>
                                <th class="py-2 pr-2">Acciones</th>
                            </tr>
                        </thead>
                        <tbody class="text-sm">
                            @foreach (var v in Model)
                            {
                                <tr class="border-b border-slate-800 text-slate-200">
                                    <td class="py-2 pr-2">@v.VehiculoId</td>
                                    <td class="pr-2">@v.Placa</td>
                                    <td class="pr-2">@v.Marca</td>
                                    <td class="pr-2">@v.Modelo</td>
                                    <td class="pr-2">@v.Anio</td>
                                    <td class="pr-2">@v.ClienteId</td>
                                    <td class="py-2">
                                        <div class="flex flex-wrap gap-2">
                                            <a asp-action="Details" asp-route-id="@v.VehiculoId"
                                               class="inline-flex items-center gap-1 px-2 py-1 rounded-full bg-sky-500 hover:bg-sky-400 text-white text-xs">
                                                <span class="material-icons text-xs">visibility</span>
                                                Detalle
                                            </a>
                                            <a asp-action="Edit" asp-route-id="@v.VehiculoId"
                                               class="inline-flex items-center gap-1 px-2 py-1 rounded-full bg-amber-500 hover:bg-amber-400 text-white text-xs">
                                                <span class="material-icons text-xs">edit</span>
                                                Editar
                                            </a>
                                        </div>
                                    </td>
                                </tr>
                            }
                        </tbody>
                    </table>
                </div>
            </div>
        }
        else if (Model != null)
        {
            <p class="text-slate-400 mt-4">
                No se encontraron vehículos que coincidan con:
                <span class="text-emerald-300 font-semibold">@ViewBag.TextoBuscado</span>
            </p>
        }

        <!-- Navegación -->
        <div class="mt-6 flex flex-wrap gap-3">
            <a asp-controller="Vehiculo" asp-action="MenuVehiculo"
               class="inline-flex items-center gap-2 px-4 py-2 bg-slate-800 hover:bg-slate-700 text-slate-200 rounded-xl border border-slate-700 transition">
                <span class="material-icons text-base">arrow_back</span>
                Volver al menú de vehículos
            </a>

            <a asp-controller="Vehiculo" asp-action="ListarVehiculos"
               class="inline-flex items-center gap-2 px-4 py-2 bg-slate-800 hover:bg-slate-700 text-slate-200 rounded-xl border border-slate-700 transition">
                <span class="material-icons text-base">list</span>
                Ir al listado de vehículos
            </a>
        </div>

    </div>
</div>
