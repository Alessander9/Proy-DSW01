@model ProyectoSW01.Models.OrdenTrabajo

@{
    ViewData["Title"] = "Editar Orden de Trabajo";
}

<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <title>Editar Orden de Trabajo</title>

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Material Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="min-h-screen bg-slate-100 text-slate-800">

    <main class="max-w-xl mx-auto px-4 py-8">

        <!-- Card principal -->
        <section class="bg-white rounded-2xl shadow-sm border border-slate-200 p-6 space-y-4">
            <div class="flex items-center justify-between mb-2">
                <h1 class="flex items-center gap-2 text-lg font-semibold text-slate-800">
                    <span class="material-icons text-emerald-500">edit</span>
                    Editar estado de la orden
                </h1>

                <span class="text-xs px-3 py-1 rounded-full bg-slate-100 text-slate-600">
                    Orden #@Model.OrdenId
                </span>
            </div>

            <!-- Info básica solo lectura -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                <div>
                    <p class="text-xs text-slate-500">Vehículo ID</p>
                    <p class="font-medium">@Model.VehiculoId</p>
                </div>
                <div>
                    <p class="text-xs text-slate-500">Fecha</p>
                    <p class="font-medium">@Model.Fecha.ToString("dd/MM/yyyy HH:mm")</p>
                </div>
                <div class="md:col-span-2">
                    <p class="text-xs text-slate-500">Observaciones</p>
                    <p class="text-sm bg-slate-50 rounded-xl px-3 py-2 border border-slate-200">
                        @(string.IsNullOrWhiteSpace(Model.Observaciones) ? "Sin observaciones" : Model.Observaciones)
                    </p>
                </div>
            </div>

            <hr class="my-3" />

            <!-- Formulario para actualizar estado -->
            <form asp-action="Edit" method="post" class="space-y-4">
                @Html.AntiForgeryToken()

                <input type="hidden" name="ordenId" value="@Model.OrdenId" />

                <div class="space-y-1">
                    <label class="block text-sm font-medium text-slate-700">
                        Estado de la orden
                    </label>
                    <select name="estado"
                            class="mt-1 block w-full rounded-xl border-slate-300 text-sm
               shadow-sm focus:border-emerald-500 focus:ring-emerald-500">

                        @* Pendiente *@
                        @if (Model.Estado == "pendiente")
                        {
                            <option value="pendiente" selected>Pendiente</option>
                        }
                        else
                        {
                            <option value="pendiente">Pendiente</option>
                        }

                        @* En proceso *@
                        @if (Model.Estado == "en_proceso")
                        {
                            <option value="en_proceso" selected>En proceso</option>
                        }
                        else
                        {
                            <option value="en_proceso">En proceso</option>
                        }

                        @* Entregado *@
                        @if (Model.Estado == "entregado")
                        {
                            <option value="entregado" selected>Entregado</option>
                        }
                        else
                        {
                            <option value="entregado">Entregado</option>
                        }

                        @* Cancelado *@
                        @if (Model.Estado == "cancelado")
                        {
                            <option value="cancelado" selected>Cancelado</option>
                        }
                        else
                        {
                            <option value="cancelado">Cancelado</option>
                        }

                    </select>


                    <p class="text-xs text-slate-500 mt-1">
                        Solo se cambia el estado, el resto de datos se mantienen.
                    </p>
                </div>

                <!-- Botones -->
                <div class="flex justify-between mt-4">
                    <a asp-action="Details"
                       asp-route-id="@Model.OrdenId"
                       class="inline-flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium
                              bg-slate-200 text-slate-800 hover:bg-slate-300 transition">
                        <span class="material-icons text-base">arrow_back</span>
                        Cancelar
                    </a>

                    <button type="submit"
                            class="inline-flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium
                                   bg-emerald-600 text-white hover:bg-emerald-700 transition">
                        <span class="material-icons text-base">save</span>
                        Guardar cambios
                    </button>
                </div>
            </form>
        </section>

    </main>

</body>
</html>
